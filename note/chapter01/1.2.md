# 1.2 数据抽象
* 数据类型指的是一组值和一组对这些值的操作的集合。
* Java编程的基础主要是使用`class`关键字构造被称为**引用类型**的数据类型。这种编程风格也称为**面向对象编程**，因为它的核心概念是**对象**，即保存了某个数据类型的值的实体。
* **抽象数据类型（ADT）**，将数据与函数实现关联，并将数据的表示方式隐藏起来。
* 抽象数据类型之所以重要是因为在程序设计上它们**支持封装**。

## 1.2.1 使用抽象数据类型
要使用一种数据类型并不一定非得知道它是如何实现的。
### 1.2.1.1 抽象数据类型的API
应用程序编程接口（API）说明抽象数据类型的行为，将列出所有构造函数和实例方法（即操作）并简要描述它们的功能。  
抽象数据类型的定义与静态方法库的共同之处：
* 两者的实现均为Java类；
* 实例方法可能接受0个或多个指定类型的参数，由括号表示并由逗号分隔；
* 它们可能会返回一个指定类型的值，也可能不会（用`void`表示）。

抽象数据类型的定义与静态方法库的不同之处：
* API中可能会出现若干个名称和类名相同且没有返回值的函数，这些特殊的函数被称为**构造函数**。
* 实例方法不需要`static`关键字。
* 某些实例方法——继承的方法。

### 1.2.1.2 继承的方法
Java会在用+运算符将任意数据类型的值和`String`值连接时调用该方法。该方法的默认实现并不实用（它会返回字符串表示该数据类型值的内存地址），因此我们常常会提供实现来重载默认实现，并在此时在API中加上`toString()`方法。

### 1.2.1.3 用例代码
通过将实现某种数据类型的全部代码封装在一个Java类中，我们可以将用例代码推向更高的抽象层次。

### 1.2.1.4 对象
* 对象是能够承载数据类型的值的实体。
* 对象的三大重要的特性：**状态、标识、行为**。
* 对象的状态即数据类型中的值。
* 对象的标识能够将一个对象区别于另一个对象。可以认为对象的标识就是它在内存中的位置。
* 对象的行为就是数据类型的操作。
* 引用是访问对象的一种方式。Java使用术语引用类型以示和原始数据类型（变量和值相关联）的区别。

### 1.2.1.5 创建对象
* 构造函数没有返回值，因为**它总是返回它的数据类型的对象的引用**。
* 每当用例调用了`new()`，系统都会：
  * 为新的对象分配内存空间；
  * 调用构造函数初始化对象中的值；
  * 返回该对象的一个引用。

### 1.2.1.6 调用实例方法
* 静态方法的主要作用是实现函数；非静态（实例）方法的主要作用是实现数据类型的操作。

### 1.2.1.7 使用对象
* 要开发某种给定数据类型的用例，我们需要：
  * 声明该类型的变量，以用来引用对象；
  * 使用关键字 `new`触发能够创建该类型的对象的一个构造函数；
  * 使用变量名在语句或表达式中调用实例方法。

### 1.2.1.8 赋值语句
* 赋值语句不会创建新的对象，而只是创建另一个指向某个已经存在的对象的引用。
* 这种情况被称为**别名**：两个变量同时指向同一个对象。
* 改变一个对象的状态将会影响到所有和该对象的别名有关的代码。

### 1.2.1.9 将对象作为参数
* 如果我们传递了一个指向`Counter`类型的对象的引用，那么方法虽然无法改变原始的引用，但它能够改变对象的值。

### 1.2.1.10 将对象作为返回值
* Java中的方法只能有一个返回值——有了对象我们的代码实际上就能返回多个值。

### 1.2.1.11 数组也是对象
在Java中，所有非原始数据类型的值都是对象，也就是说，数组也是对象。

### 1.2.1.12 对象的数组
创建一个对象的数组需要以下两个步骤：
  1. 使用方括号语法调用数组的构造函数创建数组；
  2. 对于每个数组元素调用它的构造函数创建相应的对象。

在Java中，对象数组即是一个由对象引用组成的数组，而非所有对象本身组成的数组。

## 1.2.2 抽象数据类型举例
* I/O处理类抽象数据类型，和`StdIn`和`StdOut`类似，允许我们处理多个输入输出流。
* 一个日期就是一个日、月和年的集合，一笔交易就是一个客户、日期和金额的集合。
* 每种数据类型都包含能够创建对象的构造函数和用于访问其中数据的方法。
* 一个`String`值是一串可以由索引访问的`char`值。
* Java语言为`String`的初始化和连接提供了特别的支持：我们可以直接使用字符串字面量而非构造函数来创建并初始化一个字符串，还可以直接使用+运算符代替`concat()`方法。

## 1.2.3 抽象数据类型的实现
例子：[Counter.java](/Algorithms/src/chapter01/Counter.java)
### 实例变量
实例变量与局部变量的最最关键的区别在于：每一时刻每个局部变量只会有一个值，但每个实例变量则对应着无数值（数据类型的每个实例对象都会有一个）。  
如果一个值在初始化之后不应该再改变，我们会使用`final`。
### 构造函数
* 每个Java类都至少含有一个构造函数以创建一个对象的标识。
* 一般来说，构造函数的作用是初始化实例变量。
* 每个构造函数都将创建一个对象并向调用者返回一个该对象的引用。
* 如果没有定义构造函数，类将会隐式定义一个默认情况下不接受任何参数的构造函数并将所有实例变量初始化为默认值。
* 当用例使用关键字`new`时，Java会自动触发一个构造函数。重载构造函数一般用于将实例变量由默认值初始化为用例提供的值。

### 实例方法
* 每个实例方法都有一个返回值类型、一个签名（它指定了方法名、所有参数变量的类型和名称）和一个主体（它由一系列语句组成，包括一个返回语句来将一个返回类型的值传递给调用者）。
* 实例方法与静态方法的不同：它们可以访问并操作实例变量。

### 作用域
* Java代码中的变量：
  * 参数变量；
  * 局部变量；
  * 实例变量。
* 参数变量的作用域是整个方法；局部变量的作用域是当前代码段中它的定义之后的所有语句；实例变量的作用域是整个类。

### API、用例与实现
按照下面三步走的方式用抽象数据类型满足用例的需求：
1. 定义一份API：API的作用是将使用和实现分离，以实现模块化编程。我们制定一份API的目标有二：
   1. 我们希望用例的代码清晰而正确，事实上，在最终确定API之前就编写一些用例代码来确保所设计的数据类型操作正是用例所需要的是很好的主意。
   2. 我们希望能够实现这些操作，定义一些无法实现的操作是没有意义的。
2. 用一个Java类实现API的定义：首先我们选择适当的实例变量，然后再编写构造函数和实例方法。
3. 实现多个测试用例来验证前两步做出的设计决定。

## 1.2.4 更多抽象数据类型的实现
日期数据类型的实现：[BasicDate.java](/Algorithms/src/chapter01/BasicDate.java)，另一个例子是累加器。

## 1.2.5 数据类型的设计
抽象数据类型是一种向用例隐藏内部表示的数据类型。

## ❓答疑
* 为什么要使用数据抽象？  
它能够帮助我们编写可靠而正确的代码。
* 为什么要区别原始数据类型和引用类型？为什么不只用引用类型？  
因为性能。原始数据类型更接近计算机硬件所支持的数据类型，因此使用它们的程序比使用引用类型的程序运行得更快。
